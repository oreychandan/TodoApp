var b=console.log;var g=void 0,u=()=>{};var y=e=>()=>e;var H=e=>t=>t(e);var w=e=>e();var v=(...e)=>t=>e.reduce((s,r)=>r(s),t),O=(e,...t)=>v(...t)(e),m=(e,t)=>e===g?t():e;var d=e=>j({get:()=>e,set:t=>e=t});var h=(e,t)=>{let s=Symbol("skip"),r=t(e.get(),s);r!==s&&e.set(r)};var I=e=>e+1,L=e=>e-1,$=e=>(...t)=>s=>e(s,...t);var ie=$(h)(I),le=$(h)(L);var E=(e,t,s)=>e[t]=s,j=Object.freeze;var N=(e,t,s=!1)=>{let r=s?e:{...e};for(let o of t)delete r[o];return r},_=(e,t,s=!1)=>N(e,new Set(Object.keys(e)).difference(new Set(t)).values(),s),T=(e,t)=>Object.fromEntries(Object.entries(e).map(t));var x=(e,t=u,s=u)=>{let r=d(e),o=d(t),i=j({get:r.get,set:n=>{r.set(n);let c=o.get();typeof c=="function"?c(n):typeof c.f=="function"?c.f(l=>c.data,n):C(c,n)},event:o});return s(i.set),i},C=(e,t)=>{if(typeof e=="function")e(t);else if(Array.isArray(e)||e instanceof Set||e instanceof Map)e.forEach(H(t));else if(typeof e=="object"&&e!==null)C(Object.values(e),t);else return new Error("Emit: data must be an iterable, function, or an object")};var U=e=>document.createElement(e),F=e=>document.createComment(e),G="http://www.w3.org/2000/svg",V=e=>document.createElementNS(G,e),S=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),f=Symbol("DROP"),K=e=>(t,s,r)=>r(o=>e(t,s,o)),k=e=>{let t=K(e);return[t,w(s=>s=(r,o)=>{typeof o=="function"?o(i=>s(r,i)):Object.entries(o).forEach(([i,n])=>(typeof n=="function"?t:e)(r,i,n))})]},Y=e=>T(e,([t,s])=>[S(t),s]),X=(e,t)=>`${e}: ${t};`,q=e=>Object.entries(e).map(([t,s])=>X(t,s)).join(""),B=e=>Object.entries(e).map(([t,s])=>`${t} { ${q(Y(s))} }`).join(""),J=(e,t,s)=>s===f?e.style.removeProperty(S(t)):e.style.setProperty(S(t),s),D=(e,t,s)=>s===f?e.removeAttribute(t):typeof s=="boolean"?D(e,t,s?"":f):e.setAttribute(t,s),W=E,[de,Q]=k(J),[ue,Z]=k(D),[ge,ee]=k(W),M=(e,t,s,r)=>e.addEventListener(t,s,r),te=(e,t)=>Object.entries(t).forEach(([s,r])=>{typeof r=="function"?M(e,s,r):M(e,s,r.fn,r.options)}),oe=e=>Object.keys(_(e,["styles","attributes","properties","events","children","useRef"])),se=e=>({styles:()=>Q(e.el,e.styles),attributes:()=>Z(e.el,e.attributes),properties:()=>ee(e.el,e.properties),events:()=>te(e.el,e.events),children:()=>e.el.append(...O(e.children,t=>Array.isArray(t)?t:[t]).map(a)),useRef:()=>{let t=e.useRef(e.el);t!==g&&a({...t,el:e.el})}}),a=e=>{if(typeof e=="string")return e;if(typeof e.comment=="string")return F(e.comment);e.el===g&&(e.el=e.isSvg?V(m(e.tag,y("svg"))):U(m(e.tag,y("div"))));let t=oe(e),s=se(e);return t.forEach(r=>s[r]()),e.el};var R=({all:e="0px",horizontal:t=e,vertical:s=e,left:r=t,right:o=t,top:i=s,bottom:n=s}={})=>`${i} ${o} ${n} ${r}`,ne=({x:e=0,y:t=0,blur:s=0,spread:r=0,color:o="black"}={})=>`${e}px ${t}px ${s}px ${r}px ${o}`;var z=e=>{let t={};t.bottomBttnSize=50,t.tasklistRef=d(),t.pushTaskEl=o=>t.tasklistRef.get().appendChild(o),t.dropTaskEl=o=>t.tasklistRef.get().removeChild(o),t.focusedTask=d(),t.$isTaskFocused=x(!1,[]),t.setHeight=o=>{let i=x(visualViewport.height),n=c=>o(`${c}px`);i.event.set(n),o(n(i.get())),window.addEventListener("resize",c=>{let l=visualViewport.height;l!==i.get()&&i.set(l)})},t.setEditDoneBttnVisibility=o=>{let i=x(t.$isTaskFocused.get(),[]),n=c=>o(c?f:"hidden");t.$isTaskFocused.event.get().push(n),o(n(i.get()))},t.setDeleteBttnVisibility=t.setEditDoneBttnVisibility,t.userActions={newTaskBttnClick:o=>{b("Todo: create a empty task and add it to list");let i=s.Task();t.pushTaskEl(i.el)},editDoneBttnClick:u,deleteBttnClick:u},a({el:document.body,styles:{backgroundColor:"hsl(0 0% 100% / 1)",margin:"0px",padding:"0px",overflow:"hidden",overscrollBehavior:"none",width:"100%",height:t.setHeight,boxSizing:"border-box",position:"relative"},children:{tag:"style",properties:{innerText:B({":fullscreen::backdrop":{display:"none"}})}}});let s={};s.Task=()=>{let o={};o.ref=d(),o.$scrollHeight=x(),o.useRef=n=>{o.ref.set(n)},o.deleteItem=n=>{o.ref.get().remove(),t.widthResizeObserver.unobserve(o.ref.get())},o.updateHeight=n=>{o.$scrollHeight.set(0);let c=o.ref.get().scrollHeight;o.$scrollHeight.set(c)},o.styles={height:n=>{o.$scrollHeight.event.set(c=>n(`${c}px`)),queueMicrotask(c=>{n("0px");let l=o.ref.get();a({el:l,properties:{value:""}});let p=l.scrollHeight;o.$scrollHeight.set(p)})}},o.events={input:n=>{o.updateHeight()},focus:n=>{b("focus",o.ref.get()),t.focusedTask.set(o.ref.get()),h(t.$isTaskFocused,(c,l)=>c?l:!0)},blur:n=>{b("blur",o.ref.get()),setTimeout(c=>{t.focusedTask.get()===o.ref.get()&&(t.focusedTask.set(),t.$isTaskFocused.set(!1))},0)}},o.windowResizeListener=n=>{o.updateHeight()},window.addEventListener("resize",o.windowResizeListener);let i={styles:{padding:"5px",outline:"1px solid",borderRadius:"14px"},children:{tag:"textarea",useRef:o.useRef,attributes:{placeholder:"Enter task content here"},styles:{width:"100%",padding:"0px",resize:"none",overflow:"hidden",border:"none",outline:"none",...o.styles},events:o.events}};return{el:a(i),updateHeight:o.updateHeight,cleanup:n=>{window.removeEventListener("resize",o.windowResizeListener)}}},s.taskList={attributes:{class:"scrollable"},styles:{height:"100%",width:"100%",padding:R({top:"10px",bottom:`${50+10*2+10}px`,horizontal:"10px"}),boxSizing:"border-box",overflowX:"hidden",overflowY:"auto",scrollBehavior:"smooth",overscrollBehavior:"none",display:"flex",flexDirection:"column",gap:"10px"},useRef:t.tasklistRef.set},s.actionBar={attributes:{class:"add-bttn-bar"},styles:{position:"absolute",bottom:"0px",width:"100%",padding:R({vertical:"10px"}),boxSizing:"border-box"},children:[{styles:{overflow:"hidden",position:"absolute",width:"100%",height:"100%",zIndex:0,bottom:"0px"},children:{styles:{position:"absolute",height:"100%",width:"100%",transform:"scale(1.5)",backdropFilter:"blur(4px)",backgroundColor:"hsl(0deg 0% 68.65% / 12.16%)"}}},{styles:{zIndex:1,height:"100%",width:"100%",display:"flex",justifyContent:"space-evenly",alignItems:"center",position:"relative"},children:[{styles:{width:`${t.bottomBttnSize}px`,height:`${t.bottomBttnSize}px`,borderRadius:"10px",border:"1px solid black",visibility:t.setEditDoneBttnVisibility},events:{click:t.userActions.editDoneBttnClick}},{properties:{innerText:"+"},styles:{width:`${t.bottomBttnSize}px`,height:`${t.bottomBttnSize}px`,borderRadius:"50%",backgroundColor:"#181818",backgroundImage:"linear-gradient(135deg, hsl(0deg 0% 100% / 20%), transparent)",boxShadow:ne({blur:4,x:1,y:1}),display:"flex",flexWrap:"wrap",alignContent:"center",justifyContent:"center",fontSize:"xx-large",color:"hsl(0deg 0% 80%)",userSelect:"none"},events:{click:t.userActions.newTaskBttnClick}},{styles:{width:`${t.bottomBttnSize}px`,height:`${t.bottomBttnSize}px`,borderRadius:"10px",border:"1px solid black",visibility:t.setDeleteBttnVisibility},events:{click:t.userActions.deleteBttnClick}}]}]},a({el:document.getElementById("root"),styles:{height:"100%",width:"100%",boxSizing:"border-box"},children:[s.taskList,s.actionBar]});function r(){let o=document.activeElement;return o&&(o.tagName==="INPUT"||o.tagName==="TEXTAREA")}document.addEventListener("touchmove",o=>{if(!r())return;let n=o.target,c;[...document.querySelectorAll(".scrollable").values().filter(p=>{let P=p.contains(n);return p.contains(n)&&(c=p),P})].length>0&&c.scrollHeight>c.clientHeight||o.preventDefault()},{passive:!1})},ce={name:"ToDo"},be={title:ce.name};z();
