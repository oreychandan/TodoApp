var b=console.log;var u=void 0,f=()=>{};var S=e=>()=>e;var z=e=>t=>t(e);var h=e=>e();var E=(...e)=>t=>e.reduce((s,r)=>r(s),t),O=(e,...t)=>E(...t)(e),k=(e,t)=>e===u?t():e;var x=e=>j({get:()=>e,set:t=>e=t});var y=(e,t)=>{let s=Symbol("skip"),r=t(e.get(),s);r!==s&&e.set(r)};var I=e=>e+1,L=e=>e-1,_=e=>(...t)=>s=>e(s,...t);var ie=_(y)(I),le=_(y)(L);var $=(e,t,s)=>e[t]=s,j=Object.freeze;var N=(e,t,s=!1)=>{let r=s?e:{...e};for(let o of t)delete r[o];return r},T=(e,t,s=!1)=>N(e,new Set(Object.keys(e)).difference(new Set(t)).values(),s),C=(e,t)=>Object.fromEntries(Object.entries(e).map(t));var g=(e,t=f,s=f)=>{let r=x(e),o=x(t),n=j({get:r.get,set:i=>{r.set(i);let c=o.get();typeof c=="function"?c(i):typeof c.f=="function"?c.f(l=>c.data,i):A(c,i)},event:o});return s(n.set),n},A=(e,t)=>{if(typeof e=="function")e(t);else if(Array.isArray(e)||e instanceof Set||e instanceof Map)e.forEach(z(t));else if(typeof e=="object"&&e!==null)A(Object.values(e),t);else return new Error("Emit: data must be an iterable, function, or an object")};var U=e=>document.createElement(e),F=e=>document.createComment(e),G="http://www.w3.org/2000/svg",V=e=>document.createElementNS(G,e),w=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),d=Symbol("DROP"),K=e=>(t,s,r)=>r(o=>e(t,s,o)),v=e=>{let t=K(e);return[t,h(s=>s=(r,o)=>{typeof o=="function"?o(n=>s(r,n)):Object.entries(o).forEach(([n,i])=>(typeof i=="function"?t:e)(r,n,i))})]},Y=e=>C(e,([t,s])=>[w(t),s]),X=(e,t)=>`${e}: ${t};`,q=e=>Object.entries(e).map(([t,s])=>X(t,s)).join(""),D=e=>Object.entries(e).map(([t,s])=>`${t} { ${q(Y(s))} }`).join(""),J=(e,t,s)=>s===d?e.style.removeProperty(w(t)):e.style.setProperty(w(t),s),P=(e,t,s)=>s===d?e.removeAttribute(t):typeof s=="boolean"?P(e,t,s?"":d):e.setAttribute(t,s),W=$,[xe,Q]=v(J),[ue,Z]=v(P),[ge,ee]=v(W),R=(e,t,s,r)=>e.addEventListener(t,s,r),te=(e,t)=>Object.entries(t).forEach(([s,r])=>{typeof r=="function"?R(e,s,r):R(e,s,r.fn,r.options)}),oe=e=>Object.keys(T(e,["styles","attributes","properties","events","children","useRef"])),se=e=>({styles:()=>Q(e.el,e.styles),attributes:()=>Z(e.el,e.attributes),properties:()=>ee(e.el,e.properties),events:()=>te(e.el,e.events),children:()=>e.el.append(...O(e.children,t=>Array.isArray(t)?t:[t]).map(p)),useRef:()=>{let t=e.useRef(e.el);t!==u&&p({...t,el:e.el})}}),p=e=>{if(typeof e=="string")return e;if(typeof e.comment=="string")return F(e.comment);e.el===u&&(e.el=e.isSvg?V(k(e.tag,S("svg"))):U(k(e.tag,S("div"))));let t=oe(e),s=se(e);return t.forEach(r=>s[r]()),e.el};var B=({all:e="0px",horizontal:t=e,vertical:s=e,left:r=t,right:o=t,top:n=s,bottom:i=s}={})=>`${n} ${o} ${i} ${r}`,ne=({x:e=0,y:t=0,blur:s=0,spread:r=0,color:o="black"}={})=>`${e}px ${t}px ${s}px ${r}px ${o}`;var H=e=>{let t={};t.bottomBttnSize=50,t.tasklistRef=x(),t.tasksMap=new Map,t.pushTaskEl=o=>t.tasklistRef.get().appendChild(o),t.focusedTask=x(),t.$isTaskFocused=g(!1,[]),t.setHeight=o=>{let n=g(visualViewport.height),i=c=>o(`${c}px`);n.event.set(i),o(i(n.get())),window.addEventListener("resize",c=>{let l=visualViewport.height;l!==n.get()&&n.set(l)})},t.setEditDoneBttnVisibility=o=>{let n=g(t.$isTaskFocused.get(),[]),i=c=>o(c?d:"hidden");t.$isTaskFocused.event.get().push(i),o(i(n.get()))},t.setDeleteBttnVisibility=t.setEditDoneBttnVisibility,t.userActions={newTaskBttnClick:o=>{let n=s.Task();t.pushTaskEl(n.el)},editDoneBttnClick:f,deleteBttnClick:o=>{b("Todo: delete a task");let n=t.focusedTask.get();b(n),t.focusedTask.set(),t.$isTaskFocused.set(!1),n.el.remove(),n.cleanup()}},p({el:document.body,styles:{backgroundColor:"hsl(0 0% 100% / 1)",margin:"0px",padding:"0px",overflow:"hidden",overscrollBehavior:"none",width:"100%",height:t.setHeight,boxSizing:"border-box",position:"relative"},children:{tag:"style",properties:{innerText:D({":fullscreen::backdrop":{display:"none"}})}}});let s={};s.Task=()=>{let o={};o.textareaRef=x(),o.$scrollHeight=g(),o.textareaUseRef=c=>{o.textareaRef.set(c)},o.deleteItem=c=>{o.textareaRef.get().remove(),t.widthResizeObserver.unobserve(o.textareaRef.get())},o.updateHeight=c=>{o.$scrollHeight.set(0);let l=o.textareaRef.get().scrollHeight;o.$scrollHeight.set(l)},o.styles={height:c=>{o.$scrollHeight.event.set(l=>c(`${l}px`)),queueMicrotask(l=>{c("0px");let a=o.textareaRef.get();p({el:a,properties:{value:""}});let m=a.scrollHeight;o.$scrollHeight.set(m)})}},o.textareaEvents={input:c=>{o.updateHeight()},focus:c=>{t.focusedTask.set(i),y(t.$isTaskFocused,(l,a)=>l?a:!0)},blur:c=>{b("blur",o.textareaRef.get(),Date.now()),setTimeout(l=>{t.focusedTask.get()?.textareaRef()===o.textareaRef.get()&&(t.focusedTask.set(),t.$isTaskFocused.set(!1))},300)}},o.windowResizeListener=c=>{o.updateHeight()},window.addEventListener("resize",o.windowResizeListener);let n={styles:{padding:"5px",outline:"1px solid",borderRadius:"14px"},children:{tag:"textarea",useRef:o.textareaUseRef,attributes:{placeholder:"Enter task content here"},styles:{width:"100%",padding:"0px",resize:"none",overflow:"hidden",border:"none",outline:"none",...o.styles},events:o.textareaEvents}},i={el:p(n),textareaRef:o.textareaRef.get,updateHeight:o.updateHeight,cleanup:c=>{window.removeEventListener("resize",o.windowResizeListener)}};return i},s.taskList={attributes:{class:"scrollable"},styles:{height:"100%",width:"100%",padding:B({top:"10px",bottom:`${50+10*2+10}px`,horizontal:"10px"}),boxSizing:"border-box",overflowX:"hidden",overflowY:"auto",scrollBehavior:"smooth",overscrollBehavior:"none",display:"flex",flexDirection:"column",gap:"10px"},useRef:t.tasklistRef.set},s.actionBar={attributes:{class:"add-bttn-bar"},styles:{position:"absolute",bottom:"0px",width:"100%",padding:B({vertical:"10px"}),boxSizing:"border-box"},children:[{styles:{overflow:"hidden",position:"absolute",width:"100%",height:"100%",zIndex:0,bottom:"0px"},children:{styles:{position:"absolute",height:"100%",width:"100%",transform:"scale(1.5)",backdropFilter:"blur(1px)",backgroundColor:"hsl(0deg 0% 68.65% / 12.16%)"}}},{styles:{zIndex:1,height:"100%",width:"100%",display:"flex",justifyContent:"space-evenly",alignItems:"center",position:"relative"},children:h(o=>{let n={width:`${t.bottomBttnSize}px`,height:`${t.bottomBttnSize}px`,borderRadius:"50%",backgroundColor:"#181818",backgroundImage:"linear-gradient(135deg, hsl(0deg 0% 100% / 20%), transparent)",boxShadow:ne({blur:4,x:1,y:1}),display:"flex",flexWrap:"wrap",alignContent:"center",justifyContent:"center",color:"hsl(0deg 0% 80%)",userSelect:"none"};return[{properties:{innerText:"\u2713"},styles:{...n,fontSize:"larger",visibility:t.setEditDoneBttnVisibility},events:{click:t.userActions.editDoneBttnClick}},{properties:{innerText:"+"},styles:{fontSize:"xx-large",...n},events:{click:t.userActions.newTaskBttnClick}},{attributes:{id:"delete-task"},properties:{innerText:"\u232B"},styles:{...n,fontSize:"x-large",visibility:t.setDeleteBttnVisibility},events:{click:t.userActions.deleteBttnClick}}]})}]},p({el:document.getElementById("root"),styles:{height:"100%",width:"100%",boxSizing:"border-box"},children:[s.taskList,s.actionBar]});function r(){let o=document.activeElement;return o&&(o.tagName==="INPUT"||o.tagName==="TEXTAREA")}document.addEventListener("touchmove",o=>{if(!r())return;let i=o.target,c;[...document.querySelectorAll(".scrollable").values().filter(a=>{let m=a.contains(i);return a.contains(i)&&(c=a),m})].length>0&&c.scrollHeight>c.clientHeight||o.preventDefault()},{passive:!1})},ce={name:"ToDo"},be={title:ce.name};H();
