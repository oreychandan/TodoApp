var k=console.log;var h=void 0,S=()=>{};var w=e=>()=>e,C=(e,t=!1)=>o=>(e(o),t?e:o),G=e=>t=>t(e);var b=e=>e();var j=(...e)=>t=>e.reduce((o,r)=>r(o),t),v=(e,...t)=>j(...t)(e),_=(e,t)=>e===h?t():e;var x=e=>M({get:()=>e,set:t=>e=t});var E=(e,t)=>{let o=Symbol("skip"),r=t(e.get(),o);r!==o&&e.set(r)};var V=e=>e+1,K=e=>e-1,A=e=>(...t)=>o=>e(o,...t);var fe=A(E)(V),he=A(E)(K);var R=(e,t,o)=>e[t]=o,M=Object.freeze;var Y=(e,t,o=!1)=>{let r=o?e:{...e};for(let n of t)delete r[n];return r},D=(e,t,o=!1)=>Y(e,new Set(Object.keys(e)).difference(new Set(t)).values(),o),P=(e,t)=>Object.fromEntries(Object.entries(e).map(t));var q=(e=0,t)=>{let o=new Array(e);return typeof t=="function"&&o.fill(t()),o};var O={get:e=>localStorage.getItem(e),set:(e,t)=>localStorage.setItem(e,t),remove:e=>localStorage.removeItem(e),clear:()=>localStorage.clear(),length:()=>localStorage.length,keyAtIndex:e=>localStorage.key(e),has:e=>localStorage.getItem(e)!==null,keys:()=>q(localStorage.length,w()).map((e,t)=>O.keyAtIndex(t))};var y=(e,t=S,o=S)=>{let r=x(e),n=x(t),c=M({get:r.get,set:s=>{r.set(s);let a=n.get();typeof a=="function"?a(s):typeof a.f=="function"?a.f(l=>a.data,s):B(a,s)},event:n});return o(c.set),c},B=(e,t)=>{if(typeof e=="function")e(t);else if(Array.isArray(e)||e instanceof Set||e instanceof Map)e.forEach(G(t));else if(typeof e=="object"&&e!==null)B(Object.values(e),t);else return new Error("Emit: data must be an iterable, function, or an object")};var X=e=>document.createElement(e),J=e=>document.createComment(e),W="http://www.w3.org/2000/svg",Q=e=>document.createElementNS(W,e),T=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),m=Symbol("DROP"),Z=e=>(t,o,r)=>r(n=>e(t,o,n)),$=e=>{let t=Z(e);return[t,b(o=>o=(r,n)=>{typeof n=="function"?n(c=>o(r,c)):Object.entries(n).forEach(([c,s])=>(typeof s=="function"?t:e)(r,c,s))})]},ee=e=>P(e,([t,o])=>[T(t),o]),te=(e,t)=>`${e}: ${t};`,oe=e=>Object.entries(e).map(([t,o])=>te(t,o)).join(""),I=e=>Object.entries(e).map(([t,o])=>`${t} { ${oe(ee(o))} }`).join(""),se=(e,t,o)=>o===m?e.style.removeProperty(T(t)):e.style.setProperty(T(t),o),L=(e,t,o)=>o===m?e.removeAttribute(t):typeof o=="boolean"?L(e,t,o?"":m):e.setAttribute(t,o),ne=R,[me,re]=$(se),[Se,ce]=$(L),[ke,ie]=$(ne),z=(e,t,o,r)=>e.addEventListener(t,o,r),ae=(e,t)=>Object.entries(t).forEach(([o,r])=>{typeof r=="function"?z(e,o,r):z(e,o,r.fn,r.options)}),le=e=>Object.keys(D(e,["styles","attributes","properties","events","children","useRef"])),pe=e=>({styles:()=>re(e.el,e.styles),attributes:()=>ce(e.el,e.attributes),properties:()=>ie(e.el,e.properties),events:()=>ae(e.el,e.events),children:()=>e.el.append(...v(e.children,t=>Array.isArray(t)?t:[t]).map(g)),useRef:()=>{let t=e.useRef(e.el);t!==h&&g({...t,el:e.el})}}),g=e=>{if(typeof e=="string")return e;if(typeof e.comment=="string")return J(e.comment);e.el===h&&(e.el=e.isSvg?Q(_(e.tag,w("svg"))):X(_(e.tag,w("div"))));let t=le(e),o=pe(e);return t.forEach(r=>o[r]()),e.el};var N=({all:e="0px",horizontal:t=e,vertical:o=e,left:r=t,right:n=t,top:c=o,bottom:s=o}={})=>`${c} ${n} ${s} ${r}`,xe=({x:e=0,y:t=0,blur:o=0,spread:r=0,color:n="black"}={})=>`${e}px ${t}px ${o}px ${r}px ${n}`,ge=e=>{let{get:t,set:o}=e;return{...e,get:r=>JSON.parse(t(r)),set:(r,n)=>o(r,JSON.stringify(n))}};var U=e=>{let t={};t.bottomBttnSize=50,t.tasklistRef=x(),t.localStore=b(n=>{let c=ge(O),s="todos",l=x((u=>v(c.get(s),d=>d===null?C(F=>c.set(s,F))([]):d))().map(u=>({content:u})));queueMicrotask(u=>l.get().forEach(d=>{t.pushTaskEl(o.Task(d,"local").el)}));let i=u=>c.set(s,l.get().map(d=>d.content));return{push:u=>{l.get().push(u),i()},drop:u=>{l.get().splice(l.get().indexOf(u),1),i()},update:i}}),t.pushTaskEl=n=>t.tasklistRef.get().appendChild(n),t.focusedTask=x(),t.$isTaskFocused=y(!1,[]),t.setHeight=n=>{let c=y(visualViewport.height),s=a=>n(`${a}px`);c.event.set(s),n(s(c.get())),window.addEventListener("resize",a=>{let l=visualViewport.height;l!==c.get()&&c.set(l)})},t.setEditDoneBttnVisibility=n=>{let c=y(t.$isTaskFocused.get(),[]),s=a=>n(a?m:"hidden");t.$isTaskFocused.event.get().push(s),n(s(c.get()))},t.setDeleteBttnVisibility=t.setEditDoneBttnVisibility,t.userActions={newTaskBttnClick:n=>{let c=o.Task();t.pushTaskEl(c.el)},editDoneBttnClick:S,deleteBttnClick:n=>{k("Todo: delete a task");let c=t.focusedTask.get();k(c),t.localStore.drop(c.localStorageObj),t.focusedTask.set(),t.$isTaskFocused.set(!1),c.cleanup()}},g({el:document.body,styles:{backgroundColor:"hsl(0 0% 100% / 1)",margin:"0px",padding:"0px",overflow:"hidden",overscrollBehavior:"none",width:"100%",height:t.setHeight,boxSizing:"border-box",position:"relative"},children:{tag:"style",properties:{innerText:I({":fullscreen::backdrop":{display:"none"}})}}});let o={};o.Task=(n={content:""},c="user")=>{c==="user"&&t.localStore.push(n);let s={};s.containerRef=x(),s.textareaRef=x(),s.$scrollHeight=y(),s.textareaUseRef=i=>{s.textareaRef.set(i)},s.deleteItem=i=>{s.textareaRef.get().remove(),t.widthResizeObserver.unobserve(s.textareaRef.get())},s.updateHeight=i=>{s.$scrollHeight.set(0);let p=s.textareaRef.get().scrollHeight;s.$scrollHeight.set(p)},s.styles={height:i=>{s.$scrollHeight.event.set(p=>i(`${p}px`)),queueMicrotask(p=>{i("0px");let f=s.textareaRef.get();g({el:f,properties:{value:n.content}});let u=f.scrollHeight;s.$scrollHeight.set(u)})}},s.textareaEvents={input:i=>{s.updateHeight()},focus:i=>{t.focusedTask.set(l),E(t.$isTaskFocused,(p,f)=>p?f:!0)},blur:i=>{k("blur",s.textareaRef.get(),Date.now()),setTimeout(p=>{t.focusedTask.get()?.textareaRef()===s.textareaRef.get()&&(t.focusedTask.set(),t.$isTaskFocused.set(!1),n.content=s.textareaRef.get().value,t.localStore.update())},300)}},s.windowResizeListener=i=>{s.updateHeight()},window.addEventListener("resize",s.windowResizeListener);let a={styles:{padding:"5px",outline:"1px solid",borderRadius:"14px"},useRef:s.containerRef.set,children:{tag:"textarea",useRef:s.textareaUseRef,attributes:{placeholder:"Enter task content here"},styles:{width:"100%",padding:"0px",resize:"none",overflow:"hidden",border:"none",outline:"none",...s.styles},events:s.textareaEvents}},l={el:g(a),textareaRef:s.textareaRef.get,updateHeight:s.updateHeight,cleanup:i=>{s.containerRef.get().remove(),window.removeEventListener("resize",s.windowResizeListener)},localStorageObj:n};return l},o.taskList={attributes:{class:"scrollable"},styles:{height:"100%",width:"100%",padding:N({top:"10px",bottom:`${50+10*2+10}px`,horizontal:"10px"}),boxSizing:"border-box",overflowX:"hidden",overflowY:"auto",scrollBehavior:"smooth",overscrollBehavior:"none",display:"flex",flexDirection:"column",gap:"10px"},useRef:t.tasklistRef.set},o.actionBar={attributes:{class:"add-bttn-bar"},styles:{position:"absolute",bottom:"0px",width:"100%",padding:N({vertical:"10px"}),boxSizing:"border-box"},children:[{styles:{overflow:"hidden",position:"absolute",width:"100%",height:"100%",zIndex:0,bottom:"0px"},children:{styles:{position:"absolute",height:"100%",width:"100%",transform:"scale(1.5)",backdropFilter:"blur(1px)",backgroundColor:"hsl(0deg 0% 68.65% / 12.16%)"}}},{styles:{zIndex:1,height:"100%",width:"100%",display:"flex",justifyContent:"space-evenly",alignItems:"center",position:"relative"},children:b(n=>{let c={width:`${t.bottomBttnSize}px`,height:`${t.bottomBttnSize}px`,borderRadius:"50%",backgroundColor:"#181818",backgroundImage:"linear-gradient(135deg, hsl(0deg 0% 100% / 20%), transparent)",boxShadow:xe({blur:4,x:1,y:1}),display:"flex",flexWrap:"wrap",alignContent:"center",justifyContent:"center",color:"hsl(0deg 0% 80%)",userSelect:"none"};return[{properties:{innerText:"\u2713"},styles:{...c,fontSize:"larger",visibility:t.setEditDoneBttnVisibility},events:{click:t.userActions.editDoneBttnClick}},{properties:{innerText:"+"},styles:{fontSize:"xx-large",...c},events:{click:t.userActions.newTaskBttnClick}},{attributes:{id:"delete-task"},properties:{innerText:"\u2717"},styles:{...c,fontSize:"x-large",visibility:t.setDeleteBttnVisibility},events:{click:t.userActions.deleteBttnClick}}]})}]},g({el:document.getElementById("root"),styles:{height:"100%",width:"100%",boxSizing:"border-box"},children:[o.taskList,o.actionBar]});function r(){let n=document.activeElement;return n&&(n.tagName==="INPUT"||n.tagName==="TEXTAREA")}document.addEventListener("touchmove",n=>{if(!r())return;let s=n.target,a;[...document.querySelectorAll(".scrollable").values().filter(i=>{let p=i.contains(s);return i.contains(s)&&(a=i),p})].length>0&&a.scrollHeight>a.clientHeight||n.preventDefault()},{passive:!1})},de={name:"ToDo"},Ee={title:de.name};U();
